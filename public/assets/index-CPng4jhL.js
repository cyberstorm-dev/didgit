var Te=t=>{throw TypeError(t)};var we=(t,e,s)=>e.has(t)||Te("Cannot "+s);var m=(t,e,s)=>(we(t,e,"read from private field"),s?s.call(t):e.get(t)),P=(t,e,s)=>e.has(t)?Te("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),l=(t,e,s,n)=>(we(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),ge=(t,e,s)=>(we(t,e,"access private method"),s);import{g as A,a as o,b as E,h as g,w as Ye,S as et,u as c,s as tt,k as Pe,i as xe,c as j,d as G,e as Ce,f as Ee,j as st,t as B,l as R,z as oe}from"./index-4Vzoc3zg.js";import{M as Ot,Z as Dt,m as Rt,n as jt,o as Wt,p as Zt,q as Mt,r as Jt,v as qt,x as Xt,y as Qt,A as Yt}from"./index-4Vzoc3zg.js";function nt(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function _e(t,e,s){let n=0;for(let i=0;i<s;i++)n=n*256+t[e+i];return n}function Ne(t,e,s,n){const i=[];for(;s<e+1+n;){const r=We(t,s);i.push(r.result),s+=r.consumed,E(s<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:i}}function We(t,e){E(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const s=n=>{E(n<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:n})};if(t[e]>=248){const n=t[e]-247;s(e+1+n);const i=_e(t,e+1,n);return s(e+1+n+i),Ne(t,e,e+1+n,n+i)}else if(t[e]>=192){const n=t[e]-192;return s(e+1+n),Ne(t,e,e+1,n)}else if(t[e]>=184){const n=t[e]-183;s(e+1+n);const i=_e(t,e+1,n);s(e+1+n+i);const r=g(t.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:r}}else if(t[e]>=128){const n=t[e]-128;s(e+1+n);const i=g(t.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:nt(t[e])}}function fe(t){const e=A(t,"data"),s=We(e,0);return o(s.consumed===e.length,"unexpected junk after rlp payload","data",t),s.result}function Ue(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Ze(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(r){n=n.concat(Ze(r))}),n.length<=55)return n.unshift(192+n.length),n;const i=Ue(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(A(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const s=Ue(e.length);return s.unshift(183+s.length),s.concat(e)}const $e="0123456789abcdef";function O(t){let e="0x";for(const s of Ze(t))e+=$e[s>>4],e+=$e[s&15];return e}const[it,rt]=c.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),N=new Uint32Array(80),U=new Uint32Array(80);class at extends et{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:s,Bh:n,Bl:i,Ch:r,Cl:a,Dh:u,Dl:d,Eh:f,El:F,Fh:y,Fl:L,Gh:v,Gl:w,Hh:S,Hl:H}=this;return[e,s,n,i,r,a,u,d,f,F,y,L,v,w,S,H]}set(e,s,n,i,r,a,u,d,f,F,y,L,v,w,S,H){this.Ah=e|0,this.Al=s|0,this.Bh=n|0,this.Bl=i|0,this.Ch=r|0,this.Cl=a|0,this.Dh=u|0,this.Dl=d|0,this.Eh=f|0,this.El=F|0,this.Fh=y|0,this.Fl=L|0,this.Gh=v|0,this.Gl=w|0,this.Hh=S|0,this.Hl=H|0}process(e,s){for(let p=0;p<16;p++,s+=4)N[p]=e.getUint32(s),U[p]=e.getUint32(s+=4);for(let p=16;p<80;p++){const T=N[p-15]|0,_=U[p-15]|0,Fe=c.rotrSH(T,_,1)^c.rotrSH(T,_,8)^c.shrSH(T,_,7),Ge=c.rotrSL(T,_,1)^c.rotrSL(T,_,8)^c.shrSL(T,_,7),K=N[p-2]|0,V=U[p-2]|0,be=c.rotrSH(K,V,19)^c.rotrBH(K,V,61)^c.shrSH(K,V,6),Ie=c.rotrSL(K,V,19)^c.rotrBL(K,V,61)^c.shrSL(K,V,6),me=c.add4L(Ge,Ie,U[p-7],U[p-16]),ve=c.add4H(me,Fe,be,N[p-7],N[p-16]);N[p]=ve|0,U[p]=me|0}let{Ah:n,Al:i,Bh:r,Bl:a,Ch:u,Cl:d,Dh:f,Dl:F,Eh:y,El:L,Fh:v,Fl:w,Gh:S,Gl:H,Hh:he,Hl:ue}=this;for(let p=0;p<80;p++){const T=c.rotrSH(y,L,14)^c.rotrSH(y,L,18)^c.rotrBH(y,L,41),_=c.rotrSL(y,L,14)^c.rotrSL(y,L,18)^c.rotrBL(y,L,41),Fe=y&v^~y&S,Ge=L&w^~L&H,K=c.add5L(ue,_,Ge,rt[p],U[p]),V=c.add5H(K,he,T,Fe,it[p],N[p]),be=K|0,Ie=c.rotrSH(n,i,28)^c.rotrBH(n,i,34)^c.rotrBH(n,i,39),me=c.rotrSL(n,i,28)^c.rotrBL(n,i,34)^c.rotrBL(n,i,39),ve=n&r^n&u^r&u,Qe=i&a^i&d^a&d;he=S|0,ue=H|0,S=v|0,H=w|0,v=y|0,w=L|0,{h:y,l:L}=c.add(f|0,F|0,V|0,be|0),f=u|0,F=d|0,u=r|0,d=a|0,r=n|0,a=i|0;const Ve=c.add3L(be,me,Qe);n=c.add3H(Ve,V,Ie,ve),i=Ve|0}({h:n,l:i}=c.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:r,l:a}=c.add(this.Bh|0,this.Bl|0,r|0,a|0),{h:u,l:d}=c.add(this.Ch|0,this.Cl|0,u|0,d|0),{h:f,l:F}=c.add(this.Dh|0,this.Dl|0,f|0,F|0),{h:y,l:L}=c.add(this.Eh|0,this.El|0,y|0,L|0),{h:v,l:w}=c.add(this.Fh|0,this.Fl|0,v|0,w|0),{h:S,l:H}=c.add(this.Gh|0,this.Gl|0,S|0,H|0),{h:he,l:ue}=c.add(this.Hh|0,this.Hl|0,he|0,ue|0),this.set(n,i,r,a,u,d,f,F,y,L,v,w,S,H,he,ue)}roundClean(){N.fill(0),U.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ot=Ye(()=>new at);function lt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}const ke=lt();ke.crypto||ke.msCrypto;function ct(t){switch(t){case"sha256":return tt.create();case"sha512":return ot.create()}o(!1,"invalid hashing algorithm name","algorithm",t)}const Me=function(t){return ct("sha256").update(t).digest()};let Je=Me,qe=!1;function le(t){const e=A(t,"data");return g(Je(e))}le._=Me;le.lock=function(){qe=!0};le.register=function(t){if(qe)throw new Error("sha256 is locked");Je=t};Object.freeze(le);Object.freeze(le);const Xe="0x0000000000000000000000000000000000000000",ht=BigInt(0),ut=BigInt(36);function Oe(t){t=t.toLowerCase();const e=t.substring(2).split(""),s=new Uint8Array(40);for(let i=0;i<40;i++)s[i]=e[i].charCodeAt(0);const n=A(Pe(s));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const ze={};for(let t=0;t<10;t++)ze[String(t)]=String(t);for(let t=0;t<26;t++)ze[String.fromCharCode(65+t)]=String(10+t);const De=15;function ft(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>ze[n]).join("");for(;e.length>=De;){let n=e.substring(0,De);e=parseInt(n,10)%97+e.substring(n.length)}let s=String(98-parseInt(e,10)%97);for(;s.length<2;)s="0"+s;return s}const dt=function(){const t={};for(let e=0;e<36;e++){const s="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[s]=BigInt(e)}return t}();function bt(t){t=t.toLowerCase();let e=ht;for(let s=0;s<t.length;s++)e=e*ut+dt[t[s]];return e}function de(t){if(o(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Oe(t);return o(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){o(t.substring(2,4)===ft(t),"bad icap checksum","address",t);let e=bt(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Oe("0x"+e)}o(!1,"invalid address","address",t)}function Se(t,e){return{address:de(t),storageKeys:e.map((s,n)=>(o(xe(s,32),"invalid slot",`storageKeys[${n}]`,s),s.toLowerCase()))}}function Ke(t){if(Array.isArray(t))return t.map((s,n)=>Array.isArray(s)?(o(s.length===2,"invalid slot set",`value[${n}]`,s),Se(s[0],s[1])):(o(s!=null&&typeof s=="object","invalid address-slot set","value",t),Se(s.address,s.storageKeys)));o(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(s=>{const n=t[s].reduce((i,r)=>(i[r]=!0,i),{});return Se(s,Object.keys(n).sort())});return e.sort((s,n)=>s.address.localeCompare(n.address)),e}function mt(t){return{address:de(t.address),nonce:G(t.nonce!=null?t.nonce:0),chainId:G(t.chainId!=null?t.chainId:0),signature:j.from(t.signature)}}function gt(t){let e;return typeof t=="string"?e=Ce.computePublicKey(t,!1):e=t.publicKey,de(Pe("0x"+e.substring(4)).substring(26))}function pt(t,e){return gt(Ce.recoverPublicKey(t,e))}const x=BigInt(0),yt=BigInt(2),Pt=BigInt(27),xt=BigInt(28),Lt=BigInt(35),At=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Bt=Symbol.for("nodejs.util.inspect.custom"),He=4096*32,pe=128;function Ft(t){return{blobToKzgCommitment:n=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return A(t.blobToKzgCommitment(g(n)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return A(t.blobToKzgCommitment(n));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return A(t.blobToKZGCommitment(g(n)));o(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(n,i)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return A(t.computeBlobProof(g(n),g(i)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(n,i);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return A(t.computeBlobKZGProof(g(n),g(i)));o(!1,"unsupported KZG library","kzg",t)}}}function Re(t,e){let s=t.toString(16);for(;s.length<2;)s="0"+s;return s+=le(e).substring(4),"0x"+s}function ce(t){return t==="0x"?null:de(t)}function Le(t,e){try{return Ke(t)}catch(s){o(!1,s.message,e,t)}}function Gt(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const s=[];for(let n=0;n<t.length;n++){const i=t[n];if(!Array.isArray(i))throw new Error(`authorization[${n}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!i[1])throw new Error(`authorization[${n}]: null address`);s.push({address:ce(i[1]),nonce:b(i[2],"nonce"),chainId:b(i[0],"chainId"),signature:j.from({yParity:W(i[3],"yParity"),r:oe(i[4],32),s:oe(i[5],32)})})}return s}catch(s){o(!1,s.message,e,t)}}function W(t,e){return t==="0x"?0:Ee(t,e)}function b(t,e){if(t==="0x")return x;const s=G(t,e);return o(s<=At,"value exceeds uint size",e,s),s}function h(t,e){const s=G(t,"value"),n=B(s);return o(n.length<=32,"value too large",`tx.${e}`,s),n}function Ae(t){return Ke(t).map(e=>[e.address,e.storageKeys])}function It(t){return t.map(e=>[h(e.chainId,"chainId"),e.address,h(e.nonce,"nonce"),h(e.signature.yParity,"yParity"),B(e.signature.r),B(e.signature._s)])}function vt(t,e){o(Array.isArray(t),`invalid ${e}`,"value",t);for(let s=0;s<t.length;s++)o(xe(t[s],32),"invalid ${ param } hash",`value[${s}]`,t[s]);return t}function wt(t){const e=fe(t);o(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const s={type:0,nonce:W(e[0],"nonce"),gasPrice:b(e[1],"gasPrice"),gasLimit:b(e[2],"gasLimit"),to:ce(e[3]),value:b(e[4],"value"),data:g(e[5]),chainId:x};if(e.length===6)return s;const n=b(e[6],"v"),i=b(e[7],"r"),r=b(e[8],"s");if(i===x&&r===x)s.chainId=n;else{let a=(n-Lt)/yt;a<x&&(a=x),s.chainId=a,o(a!==x||n===Pt||n===xt,"non-canonical legacy v","v",e[6]),s.signature=j.from({r:oe(e[7],32),s:oe(e[8],32),v:n})}return s}function St(t,e){const s=[h(t.nonce,"nonce"),h(t.gasPrice||0,"gasPrice"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data];let n=x;if(t.chainId!=x)n=G(t.chainId,"tx.chainId"),o(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const r=t.signature.legacyChainId;r!=null&&(n=r)}if(!e)return n!==x&&(s.push(B(n)),s.push("0x"),s.push("0x")),O(s);let i=BigInt(27+e.yParity);return n!==x?i=j.getChainIdV(n,e.v):BigInt(e.v)!==i&&o(!1,"tx.chainId/sig.v mismatch","sig",e),s.push(B(i)),s.push(B(e.r)),s.push(B(e._s)),O(s)}function Be(t,e){let s;try{if(s=W(e[0],"yParity"),s!==0&&s!==1)throw new Error("bad yParity")}catch{o(!1,"invalid yParity","yParity",e[0])}const n=oe(e[1],32),i=oe(e[2],32),r=j.from({r:n,s:i,yParity:s});t.signature=r}function Ht(t){const e=fe(A(t).slice(1));o(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",g(t));const s={type:2,chainId:b(e[0],"chainId"),nonce:W(e[1],"nonce"),maxPriorityFeePerGas:b(e[2],"maxPriorityFeePerGas"),maxFeePerGas:b(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:b(e[4],"gasLimit"),to:ce(e[5]),value:b(e[6],"value"),data:g(e[7]),accessList:Le(e[8],"accessList")};return e.length===9||Be(s,e.slice(9)),s}function Ct(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Ae(t.accessList||[])];return e&&(s.push(h(e.yParity,"yParity")),s.push(B(e.r)),s.push(B(e.s))),R(["0x02",O(s)])}function Et(t){const e=fe(A(t).slice(1));o(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",g(t));const s={type:1,chainId:b(e[0],"chainId"),nonce:W(e[1],"nonce"),gasPrice:b(e[2],"gasPrice"),gasLimit:b(e[3],"gasLimit"),to:ce(e[4]),value:b(e[5],"value"),data:g(e[6]),accessList:Le(e[7],"accessList")};return e.length===8||Be(s,e.slice(8)),s}function zt(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.gasPrice||0,"gasPrice"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Ae(t.accessList||[])];return e&&(s.push(h(e.yParity,"recoveryParam")),s.push(B(e.r)),s.push(B(e.s))),R(["0x01",O(s)])}function Kt(t){let e=fe(A(t).slice(1)),s="3",n=null,i=null;if(e.length===4&&Array.isArray(e[0])){s="3 (network format)";const a=e[1],u=e[2],d=e[3];o(Array.isArray(a),"invalid network format: blobs not an array","fields[1]",a),o(Array.isArray(u),"invalid network format: commitments not an array","fields[2]",u),o(Array.isArray(d),"invalid network format: proofs not an array","fields[3]",d),o(a.length===u.length,"invalid network format: blobs/commitments length mismatch","fields",e),o(a.length===d.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let f=0;f<e[1].length;f++)i.push({data:a[f],commitment:u[f],proof:d[f]});e=e[0]}else if(e.length===5&&Array.isArray(e[0])){s="3 (EIP-7594 network format)",n=Ee(e[1]);const a=e[2],u=e[3],d=e[4];o(n===1,`unsupported EIP-7594 network format version: ${n}`,"fields[1]",n),o(Array.isArray(a),"invalid EIP-7594 network format: blobs not an array","fields[2]",a),o(Array.isArray(u),"invalid EIP-7594 network format: commitments not an array","fields[3]",u),o(Array.isArray(d),"invalid EIP-7594 network format: proofs not an array","fields[4]",d),o(a.length===u.length,"invalid network format: blobs/commitments length mismatch","fields",e),o(a.length*pe===d.length,"invalid network format: blobs/proofs length mismatch","fields",e),i=[];for(let f=0;f<a.length;f++){const F=[];for(let y=0;y<pe;y++)F.push(d[f*pe+y]);i.push({data:a[f],commitment:u[f],proof:R(F)})}e=e[0]}o(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${s}`,"data",g(t));const r={type:3,chainId:b(e[0],"chainId"),nonce:W(e[1],"nonce"),maxPriorityFeePerGas:b(e[2],"maxPriorityFeePerGas"),maxFeePerGas:b(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:b(e[4],"gasLimit"),to:ce(e[5]),value:b(e[6],"value"),data:g(e[7]),accessList:Le(e[8],"accessList"),maxFeePerBlobGas:b(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10],blobWrapperVersion:n};i&&(r.blobs=i),o(r.to!=null,`invalid address for transaction type: ${s}`,"data",t),o(Array.isArray(r.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let a=0;a<r.blobVersionedHashes.length;a++)o(xe(r.blobVersionedHashes[a],32),`invalid blobVersionedHash at index ${a}: must be length 32`,"data",t);return e.length===11||Be(r,e.slice(11)),r}function Vt(t,e,s){const n=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||Xe,h(t.value,"value"),t.data,Ae(t.accessList||[]),h(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),vt(t.blobVersionedHashes||[],"blobVersionedHashes")];if(e&&(n.push(h(e.yParity,"yParity")),n.push(B(e.r)),n.push(B(e.s)),s)){if(t.blobWrapperVersion!=null){const i=B(t.blobWrapperVersion),r=[];for(const{proof:a}of s){const u=A(a),d=u.length/pe;for(let f=0;f<u.length;f+=d)r.push(u.subarray(f,f+d))}return R(["0x03",O([n,i,s.map(a=>a.data),s.map(a=>a.commitment),r])])}return R(["0x03",O([n,s.map(i=>i.data),s.map(i=>i.commitment),s.map(i=>i.proof)])])}return R(["0x03",O(n)])}function Tt(t){const e=fe(A(t).slice(1));o(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",g(t));const s={type:4,chainId:b(e[0],"chainId"),nonce:W(e[1],"nonce"),maxPriorityFeePerGas:b(e[2],"maxPriorityFeePerGas"),maxFeePerGas:b(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:b(e[4],"gasLimit"),to:ce(e[5]),value:b(e[6],"value"),data:g(e[7]),accessList:Le(e[8],"accessList"),authorizationList:Gt(e[9],"authorizationList")};return e.length===10||Be(s,e.slice(10)),s}function _t(t,e){const s=[h(t.chainId,"chainId"),h(t.nonce,"nonce"),h(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),h(t.maxFeePerGas||0,"maxFeePerGas"),h(t.gasLimit,"gasLimit"),t.to||"0x",h(t.value,"value"),t.data,Ae(t.accessList||[]),It(t.authorizationList||[])];return e&&(s.push(h(e.yParity,"yParity")),s.push(B(e.r)),s.push(B(e.s))),R(["0x04",O(s)])}var I,Z,M,J,q,X,Q,Y,ee,te,se,ne,D,$,z,k,ie,re,ae,ye;const C=class C{constructor(){P(this,ae);P(this,I);P(this,Z);P(this,M);P(this,J);P(this,q);P(this,X);P(this,Q);P(this,Y);P(this,ee);P(this,te);P(this,se);P(this,ne);P(this,D);P(this,$);P(this,z);P(this,k);P(this,ie);P(this,re);l(this,I,null),l(this,Z,null),l(this,J,0),l(this,q,x),l(this,X,null),l(this,Q,null),l(this,Y,null),l(this,M,"0x"),l(this,ee,x),l(this,te,x),l(this,se,null),l(this,ne,null),l(this,D,null),l(this,$,null),l(this,z,null),l(this,k,null),l(this,ie,null),l(this,re,null)}get type(){return m(this,I)}set type(e){switch(e){case null:l(this,I,null);break;case 0:case"legacy":l(this,I,0);break;case 1:case"berlin":case"eip-2930":l(this,I,1);break;case 2:case"london":case"eip-1559":l(this,I,2);break;case 3:case"cancun":case"eip-4844":l(this,I,3);break;case 4:case"pectra":case"eip-7702":l(this,I,4);break;default:o(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=m(this,Z);return e==null&&this.type===3?Xe:e}set to(e){l(this,Z,e==null?null:de(e))}get nonce(){return m(this,J)}set nonce(e){l(this,J,Ee(e,"value"))}get gasLimit(){return m(this,q)}set gasLimit(e){l(this,q,G(e))}get gasPrice(){const e=m(this,X);return e==null&&(this.type===0||this.type===1)?x:e}set gasPrice(e){l(this,X,e==null?null:G(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=m(this,Q);return e??(this.type===2||this.type===3?x:null)}set maxPriorityFeePerGas(e){l(this,Q,e==null?null:G(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=m(this,Y);return e??(this.type===2||this.type===3?x:null)}set maxFeePerGas(e){l(this,Y,e==null?null:G(e,"maxFeePerGas"))}get data(){return m(this,M)}set data(e){l(this,M,g(e))}get value(){return m(this,ee)}set value(e){l(this,ee,G(e,"value"))}get chainId(){return m(this,te)}set chainId(e){l(this,te,G(e))}get signature(){return m(this,se)||null}set signature(e){l(this,se,e==null?null:j.from(e))}isValid(){const e=this.signature;if(e&&!e.isValid())return!1;const s=this.authorizationList;if(s){for(const n of s)if(!n.signature.isValid())return!1}return!0}get accessList(){const e=m(this,ne)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){l(this,ne,e==null?null:Ke(e))}get authorizationList(){const e=m(this,ie)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){l(this,ie,e==null?null:e.map(s=>mt(s)))}get maxFeePerBlobGas(){const e=m(this,D);return e==null&&this.type===3?x:e}set maxFeePerBlobGas(e){l(this,D,e==null?null:G(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=m(this,$);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){o(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let s=0;s<e.length;s++)o(xe(e[s],32),"invalid blobVersionedHash",`value[${s}]`,e[s])}l(this,$,e)}get blobs(){return m(this,k)==null?null:m(this,k).map(e=>Object.assign({},e))}set blobs(e){if(e==null){l(this,k,null);return}const s=[],n=[];for(let i=0;i<e.length;i++){const r=e[i];if(st(r)){E(m(this,z),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=A(r);if(o(a.length<=He,"blob is too large",`blobs[${i}]`,r),a.length!==He){const f=new Uint8Array(He);f.set(a),a=f}const u=m(this,z).blobToKzgCommitment(a),d=g(m(this,z).computeBlobKzgProof(a,u));s.push({data:g(a),commitment:g(u),proof:d}),n.push(Re(1,u))}else{const a=g(r.data),u=g(r.commitment),d=g(r.proof);s.push({data:a,commitment:u,proof:d}),n.push(Re(1,u))}}l(this,k,s),l(this,$,n)}get kzg(){return m(this,z)}set kzg(e){e==null?l(this,z,null):l(this,z,Ft(e))}get blobWrapperVersion(){return m(this,re)}set blobWrapperVersion(e){l(this,re,e)}get hash(){return this.signature==null?null:Pe(ge(this,ae,ye).call(this,!0,!1))}get unsignedHash(){return Pe(this.unsignedSerialized)}get from(){return this.signature==null?null:pt(this.unsignedHash,this.signature.getCanonical())}get fromPublicKey(){return this.signature==null?null:Ce.recoverPublicKey(this.unsignedHash,this.signature.getCanonical())}isSigned(){return this.signature!=null}get serialized(){return ge(this,ae,ye).call(this,!0,!0)}get unsignedSerialized(){return ge(this,ae,ye).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,s=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=m(this,D)!=null||m(this,$);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&E(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),E(!s||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),E(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return this.type!=null?r.push(this.type):this.authorizationList&&this.authorizationList.length?r.push(4):s?r.push(2):e?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(i&&this.to||(r.push(0),r.push(1),r.push(2)),r.push(3)),r.sort(),r}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return C.from(this)}toJSON(){const e=s=>s==null?null:s.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}[Bt](){return this.toString()}toString(){const e=[],s=i=>{let r=this[i];typeof r=="string"&&(r=JSON.stringify(r)),e.push(`${i}: ${r}`)};this.type&&s("type"),s("to"),s("data"),s("nonce"),s("gasLimit"),s("value"),this.chainId!=null&&s("chainId"),this.signature&&(s("from"),e.push(`signature: ${this.signature.toString()}`));const n=this.authorizationList;if(n){const i=[];for(const r of n){const a=[];a.push(`address: ${JSON.stringify(r.address)}`),r.nonce!=null&&a.push(`nonce: ${r.nonce}`),r.chainId!=null&&a.push(`chainId: ${r.chainId}`),r.signature&&a.push(`signature: ${r.signature.toString()}`),i.push(`Authorization { ${a.join(", ")} }`)}e.push(`authorizations: [ ${i.join(", ")} ]`)}return`Transaction { ${e.join(", ")} }`}static from(e){if(e==null)return new C;if(typeof e=="string"){const n=A(e);if(n[0]>=127)return C.from(wt(n));switch(n[0]){case 1:return C.from(Et(n));case 2:return C.from(Ht(n));case 3:return C.from(Kt(n));case 4:return C.from(Tt(n))}E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const s=new C;return e.type!=null&&(s.type=e.type),e.to!=null&&(s.to=e.to),e.nonce!=null&&(s.nonce=e.nonce),e.gasLimit!=null&&(s.gasLimit=e.gasLimit),e.gasPrice!=null&&(s.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(s.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(s.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(s.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(s.data=e.data),e.value!=null&&(s.value=e.value),e.chainId!=null&&(s.chainId=e.chainId),e.signature!=null&&(s.signature=j.from(e.signature)),e.accessList!=null&&(s.accessList=e.accessList),e.authorizationList!=null&&(s.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(s.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(s.kzg=e.kzg),e.blobWrapperVersion!=null&&(s.blobWrapperVersion=e.blobWrapperVersion),e.blobs!=null&&(s.blobs=e.blobs),e.hash!=null&&(o(s.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),o(s.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(o(s.isSigned(),"unsigned transaction cannot define '.from'","tx",e),o(s.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),s}};I=new WeakMap,Z=new WeakMap,M=new WeakMap,J=new WeakMap,q=new WeakMap,X=new WeakMap,Q=new WeakMap,Y=new WeakMap,ee=new WeakMap,te=new WeakMap,se=new WeakMap,ne=new WeakMap,D=new WeakMap,$=new WeakMap,z=new WeakMap,k=new WeakMap,ie=new WeakMap,re=new WeakMap,ae=new WeakSet,ye=function(e,s){E(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return St(this,n);case 1:return zt(this,n);case 2:return Ct(this,n);case 3:return Vt(this,n,s?this.blobs:null);case 4:return _t(this,n)}E(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let je=C;export{Ot as MessagePrefix,j as Signature,Ce as SigningKey,je as Transaction,Xe as ZeroAddress,Dt as ZeroHash,Ke as accessListify,E as assert,o as assertArgument,Rt as assertPrivate,mt as authorizationify,gt as computeAddress,R as concat,jt as dataLength,fe as decodeRlp,Wt as defineProperties,O as encodeRlp,de as getAddress,G as getBigInt,A as getBytes,Zt as getBytesCopy,Ee as getNumber,Mt as getUint,Jt as hashMessage,g as hexlify,st as isBytesLike,xe as isHexString,Pe as keccak256,qt as makeError,pt as recoverAddress,le as sha256,B as toBeArray,Xt as toBeHex,Qt as toUtf8Bytes,Yt as version,oe as zeroPadValue};
